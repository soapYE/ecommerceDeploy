(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5096769e"],{"0a63":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("va-card",{attrs:{title:"Order List"}},[a("div",{staticClass:"row align--center"},[a("div",{staticClass:"flex lg4"},[a("va-input",{attrs:{placeholder:"Search by transaction id or username",removable:""},on:{input:t.search},model:{value:t.term,callback:function(e){t.term=e},expression:"term"}},[a("va-icon",{attrs:{slot:"prepend",name:"fa fa-search"},slot:"prepend"})],1)],1),a("div",{staticClass:"flex lg3"},[a("va-select",{attrs:{label:"operate type",options:t.typeOptions,textBy:"typeName"},model:{value:t.type,callback:function(e){t.type=e},expression:"type"}})],1),a("div",{staticClass:"flex lg2"},[a("va-select",{attrs:{label:t.$t("tables.perPage"),options:t.perPageOptions,noClear:""},model:{value:t.perPage,callback:function(e){t.perPage=e},expression:"perPage"}})],1),a("div",{directives:[{name:"show",rawName:"v-show",value:t.isloading,expression:"isloading"}],staticClass:"flex lg2"},[a("hollow-dots-spinner",{attrs:{"animation-duration":1e3,size:100,color:"skyblue"}})],1)]),a("va-data-table",{attrs:{fields:t.fields,data:t.showList,"per-page":parseInt(t.perPage)},scopedSlots:t._u([{key:"operateType",fn:function(e){return[a("va-badge",{attrs:{color:t.getColor(e.rowData)}},[t._v(" "+t._s(t.getTag(e.rowData))+" ")])]}},{key:"actions",fn:function(e){return[a("va-button",{staticClass:"ma-0",attrs:{flat:"",small:"",color:"green"},on:{click:function(a){return a.stopPropagation(),t.approve(e.rowData)}}},[t._v(" approve ")]),a("va-button",{staticClass:"ma-0",attrs:{flat:"",small:"",color:"grey"},on:{click:function(a){return a.stopPropagation(),t.refuse(e.rowData)}}},[t._v(" refuse ")])]}}])})],1)],1)},r=[],o=a("50fc"),i=a("2b70"),s=a("b933"),l={name:"order-main",components:{HollowDotsSpinner:i["a"]},data:function(){return{fieldData:[],term:"",perPage:"10",perPageOptions:["5","10","20","30","50"],typeOptions:[{id:1,typeName:"recharge"},{id:2,typeName:"withdraw"}],type:0,showList:[],isloading:!1}},methods:{getColor:function(t){var e=t.operateType;return"1"===e?"#fcbf49":"#6a6b83"},getTag:function(t){var e=t.operateType;return"1"===e?"Recharge":"Withdraw"},approve:function(t){var e=this,a={walletId:t.walletId,transactionAuditId:t.transactionAuditId},n={walletId:t.walletId};2==Number(t.operateType)?(localStorage.token="wallet",console.log(localStorage.token),Object(s["b"])(this,n).then((function(n){console.log(n),Number(n.data.data.availableMoney)<Number(t.operateMoney)?e.showToast("this user has not enough money, can't withdraw",{icon:"fa-exclamation",position:"top-right",duration:2500,fullWidth:!1}):(localStorage.token=e.$store.state.user.token,Object(o["c"])(e,a).then((function(a){console.log(a);for(var n=[],r=0;r<e.fieldData.length;r++)t.walletId==e.fieldData[r].walletId&&t.transactionAuditId==e.fieldData[r].transactionAuditId||(n=n.concat(e.fieldData[r]));e.fieldData=n,e.searchTransaction()}))),localStorage.token=e.$store.state.user.token}))):(localStorage.token=this.$store.state.user.token,Object(o["c"])(this,a).then((function(a){console.log(a);for(var n=[],r=0;r<e.fieldData.length;r++)t.walletId==e.fieldData[r].walletId&&t.transactionAuditId==e.fieldData[r].transactionAuditId||(n=n.concat(e.fieldData[r]));e.fieldData=n,e.searchTransaction()})))},refuse:function(t){var e=this,a={walletId:t.walletId,transactionAuditId:t.transactionAuditId};Object(o["g"])(this,a).then((function(a){console.log(a);for(var n=[],r=0;r<e.fieldData.length;r++)t.walletId==e.fieldData[r].walletId&&t.transactionAuditId==e.fieldData[r].transactionAuditId||(n=n.concat(e.fieldData[r]));e.fieldData=n,e.searchTransaction()}))},searchTransaction:function(){var t=this,e=[];e=!this.term||this.term.length<1?this.fieldData:this.fieldData.filter((function(e){return e.transactionAuditId.toLowerCase().startsWith(t.term.toLowerCase())||e.username.toLowerCase().includes(t.term.toLowerCase())}));var a=[];if(console.log(this.type.id),0!=this.type){for(var n=0;n<e.length;n++)Number(e[n].operateType)==this.type.id&&(a=a.concat(e[n]));this.showList=a}else this.showList=e}},watch:{type:function(t,e){var a=this;clearTimeout(this.timer),this.timer=setTimeout((function(){a.isloading=!0,setTimeout((function(){a.isloading=!1,a.searchTransaction()}),2e3)}),1e3)},term:function(t,e){var a=this;clearTimeout(this.timer),this.timer=setTimeout((function(){a.isloading=!0,setTimeout((function(){a.isloading=!1,a.searchTransaction()}),2e3)}),1e3)}},computed:{fields:function(){return[{name:"transactionAuditId",title:"transaction ID"},{name:"username",title:"username"},{name:"__slot:operateType",title:"operateType"},{name:"operateMoney",title:"operate money"},{name:"createTime",title:"create time"},{name:"__slot:actions",dataClass:"text-right"}]},filteredData:function(){var t=this;return!this.term||this.term.length<1?this.fieldData:this.fieldData.filter((function(e){return e.transactionAuditId.toLowerCase().startsWith(t.term.toLowerCase())||e.username.toLowerCase().includes(t.term.toLowerCase())}))}},created:function(){var t=this;Object(o["d"])(this).then((function(e){console.log(e.data),200==e.status?(t.fieldData=e.data.data,t.showList=t.fieldData,console.log(t.fieldData)):console.log("Return 500!")}))}},c=l,u=(a("cebf"),a("2877")),d=Object(u["a"])(c,n,r,!1,null,"2d26b28a",null);e["default"]=d.exports},"50fc":function(t,e,a){"use strict";a.d(e,"d",(function(){return i})),a.d(e,"c",(function(){return s})),a.d(e,"g",(function(){return l})),a.d(e,"e",(function(){return c})),a.d(e,"j",(function(){return u})),a.d(e,"a",(function(){return d})),a.d(e,"h",(function(){return f})),a.d(e,"f",(function(){return p})),a.d(e,"b",(function(){return h})),a.d(e,"i",(function(){return m}));var n="39.106.57.246",r="4396",o="http://"+n+":"+r;function i(t){return t.$http.get(o+"/admin/audit/get")}function s(t,e){return t.$http.post(o+"/admin/audit/pass ",e)}function l(t,e){return t.$http.post(o+"/admin/audit/refuse ",e)}function c(t){return t.$http.get(o+"/admin/dict/get")}function u(t,e){return t.$http.post(o+"/admin/dict/update",e)}function d(t,e){return t.$http.post(o+"/admin/dict/add ",e)}function f(t,e){return t.$http.post(o+"/admin/dict/delete",e)}function p(t){return t.$http.get(o+"/admin/menu/get ")}function h(t,e){return t.$http.post(o+"/admin/menu/add  ",e)}function m(t,e){return t.$http.post(o+"/admin/menu/delete ",e)}},6254:function(t,e,a){},b933:function(t,e,a){"use strict";a.d(e,"d",(function(){return i})),a.d(e,"g",(function(){return s})),a.d(e,"b",(function(){return l})),a.d(e,"c",(function(){return c})),a.d(e,"a",(function(){return u})),a.d(e,"f",(function(){return d})),a.d(e,"h",(function(){return f})),a.d(e,"e",(function(){return p}));var n="39.106.57.246",r="4396",o="http://"+n+":"+r;function i(t,e){return t.$http.post(o+"/wallet/login",e)}function s(t,e){return t.$http.post(o+"/wallet/register",e)}function l(t,e){return t.$http.get(o+"/wallet/info/get",{params:e})}function c(t,e){return t.$http.get(o+"/wallet/transaction",{params:e})}function u(t,e){return t.$http.post(o+"/wallet/info/update",e)}function d(t,e){return t.$http.post(o+"/wallet/recharge",e)}function f(t,e){return t.$http.post(o+"/wallet/withdraw",e)}function p(t,e){return t.$http.post(o+"/order/pay ",e)}},cebf:function(t,e,a){"use strict";var n=a("6254"),r=a.n(n);r.a}}]);
//# sourceMappingURL=chunk-5096769e.f8be8261.js.map