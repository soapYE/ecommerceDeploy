{"version":3,"sources":["webpack:///./src/views/admin/audit_wallet.vue?8eca","webpack:///src/views/admin/audit_wallet.vue","webpack:///./src/views/admin/audit_wallet.vue?4c9e","webpack:///./src/views/admin/audit_wallet.vue?fab8","webpack:///./src/api/admin.js","webpack:///./src/views/admin/audit_wallet.vue?74ee"],"names":["render","_vm","this","_h","$createElement","_c","_self","attrs","staticClass","on","search","model","value","callback","$$v","term","expression","slot","typeOptions","type","$t","perPageOptions","perPage","directives","name","rawName","fields","showList","parseInt","scopedSlots","_u","key","fn","props","getColor","rowData","_v","_s","getTag","$event","stopPropagation","approve","refuse","staticRenderFns","component","ip","port","base_url","getAuditRecords","obj","$http","get","approveAudit","data","post","refuseAudit","getDictionary","updateDictionary","addDictionary","removeDictionary","getUsers","addPermission","removePermission"],"mappings":"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","file":"static/js/chunk-23d664f3.59979617.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('va-card',{attrs:{\"title\":\"Order List\"}},[_c('div',{staticClass:\"row align--center\"},[_c('div',{staticClass:\"flex lg4\"},[_c('va-input',{attrs:{\"placeholder\":\"Search by transaction id or username\",\"removable\":\"\"},on:{\"input\":_vm.search},model:{value:(_vm.term),callback:function ($$v) {_vm.term=$$v},expression:\"term\"}},[_c('va-icon',{attrs:{\"slot\":\"prepend\",\"name\":\"fa fa-search\"},slot:\"prepend\"})],1)],1),_c('div',{staticClass:\"flex lg3\"},[_c('va-select',{attrs:{\"label\":\"operate type\",\"options\":_vm.typeOptions,\"textBy\":\"typeName\"},model:{value:(_vm.type),callback:function ($$v) {_vm.type=$$v},expression:\"type\"}})],1),_c('div',{staticClass:\"flex lg2\"},[_c('va-select',{attrs:{\"label\":_vm.$t('tables.perPage'),\"options\":_vm.perPageOptions,\"noClear\":\"\"},model:{value:(_vm.perPage),callback:function ($$v) {_vm.perPage=$$v},expression:\"perPage\"}})],1),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isloading),expression:\"isloading\"}],staticClass:\"flex lg2\"},[_c('hollow-dots-spinner',{attrs:{\"animation-duration\":1000,\"size\":100,\"color\":\"skyblue\"}})],1)]),_c('va-data-table',{attrs:{\"fields\":_vm.fields,\"data\":_vm.showList,\"per-page\":parseInt(_vm.perPage)},scopedSlots:_vm._u([{key:\"operateType\",fn:function(props){return [_c('va-badge',{attrs:{\"color\":_vm.getColor(props.rowData)}},[_vm._v(\" \"+_vm._s(_vm.getTag(props.rowData))+\" \")])]}},{key:\"actions\",fn:function(props){return [_c('va-button',{staticClass:\"ma-0\",attrs:{\"flat\":\"\",\"small\":\"\",\"color\":\"green\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.approve(props.rowData)}}},[_vm._v(\" approve \")]),_c('va-button',{staticClass:\"ma-0\",attrs:{\"flat\":\"\",\"small\":\"\",\"color\":\"grey\"},on:{\"click\":function($event){$event.stopPropagation();return _vm.refuse(props.rowData)}}},[_vm._v(\" refuse \")])]}}])})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <va-card title=\"Order List\">\n      <div class=\"row align--center\">\n        <div class=\"flex lg4\">\n          <va-input\n            v-model=\"term\"\n            placeholder=\"Search by transaction id or username\"\n            @input=\"search\"\n            removable\n          >\n            <va-icon name=\"fa fa-search\" slot=\"prepend\" />\n          </va-input>\n        </div>\n\n        <div class=\"flex lg3\">\n          <va-select\n            v-model=\"type\"\n            label=\"operate type\"\n            :options=\"typeOptions\"\n            textBy=\"typeName\"\n          />\n        </div>\n\n        <div class=\"flex lg2\">\n          <va-select\n            v-model=\"perPage\"\n            :label=\"$t('tables.perPage')\"\n            :options=\"perPageOptions\"\n            noClear\n          />\n        </div>\n\n        <div class=\"flex lg2\" v-show=\"isloading\">\n          <hollow-dots-spinner\n            :animation-duration=\"1000\"\n            :size=\"100\"\n            color=\"skyblue\"\n          />\n        </div>\n\n      </div>\n\n      <va-data-table\n        :fields=\"fields\"\n        :data=\"showList\"\n        :per-page=\"parseInt(perPage)\"\n      >\n\n        <template slot=\"operateType\" slot-scope=\"props\">\n          <va-badge :color=\"getColor(props.rowData)\">\n            {{getTag(props.rowData)}}\n          </va-badge>\n        </template>\n\n        <template slot=\"actions\" slot-scope=\"props\">\n\n          <va-button flat small color=\"green\" @click.stop=\"approve(props.rowData)\" class=\"ma-0\">\n            <!--              {{ getAction(props.rowData) }} -->\n            approve\n          </va-button>\n\n          <va-button flat small color=\"grey\"\n                     @click.stop=\"refuse(props.rowData)\"\n                     class=\"ma-0\">\n            refuse\n          </va-button>\n\n        </template>\n\n      </va-data-table>\n    </va-card>\n\n  </div>\n</template>\n\n<script>\n  import {approveAudit, getAuditRecords, refuseAudit} from \"../../api/admin\";\n  import HollowDotsSpinner from \"epic-spinners/src/components/lib/HollowDotsSpinner\";\n  export default {\n    name: \"order-main\",\n    components: {\n      HollowDotsSpinner\n    },\n    data() {\n      return {\n        fieldData: [],\n        term: '',\n        perPage: '10',\n        perPageOptions: ['5', '10', '20', '30', '50'],\n        typeOptions: [{id : 1, typeName : \"recharge\"},{id : 2, typeName : \"withdraw\"}],\n        type : 0,\n        showList : [],\n        isloading : false\n      }\n    },\n    methods: {\n\n      getColor(row) {\n        let state = row.operateType;\n        if (state === '1') {\n          return \"#fcbf49\"\n        } else {\n          return '#6a6b83'\n        }\n      },\n      getTag(row) {\n        let state = row.operateType;\n        if (state === '1') {\n          return \"Recharge\";\n        } else {\n          return 'Withdraw'\n        }\n      },\n      approve(row){\n        var data = {\"walletId\" : row.walletId, \"transactionAuditId\" : row.transactionAuditId}\n        approveAudit(this,data).then(res=>{\n          console.log(res);\n          var newList = [];\n          for(var i=0;i<this.fieldData.length;i++){\n            if(row.walletId == this.fieldData[i].walletId && row.transactionAuditId == this.fieldData[i].transactionAuditId){\n              continue;\n            }\n            else{\n              newList = newList.concat(this.fieldData[i]);\n            }\n          }\n          this.fieldData = newList;\n          this.searchTransaction();\n        })\n      },\n      refuse(row){\n        var data = {\"walletId\" : row.walletId, \"transactionAuditId\" : row.transactionAuditId}\n        refuseAudit(this,data).then(res=>{\n          console.log(res);\n          var newList = [];\n          for(var i=0;i<this.fieldData.length;i++){\n            if(row.walletId == this.fieldData[i].walletId && row.transactionAuditId == this.fieldData[i].transactionAuditId){\n              continue;\n            }\n            else{\n              newList = newList.concat(this.fieldData[i]);\n            }\n          }\n          this.fieldData = newList;\n          this.searchTransaction();\n        })\n      },\n      searchTransaction(){\n        var newList = []\n        if (!this.term || this.term.length < 1) {\n          newList = this.fieldData\n        }\n        else{\n          newList = this.fieldData.filter(item => {\n            return item.transactionAuditId.toLowerCase().startsWith(this.term.toLowerCase()) || item.username.toLowerCase().includes(this.term.toLowerCase())\n          })\n        }\n        var newnewList = [];\n        console.log(this.type.id);\n        if(this.type != 0) {\n          for (var i = 0; i < newList.length; i++) {\n            if (Number(newList[i].operateType) == this.type.id) {\n              newnewList = newnewList.concat(newList[i]);\n            } else {\n              continue;\n            }\n          }\n          this.showList = newnewList;\n        }\n        else{\n          this.showList = newList;\n        }\n      }\n    },\n    watch : {\n      type : function(val,oldval){\n        clearTimeout(this.timer); //清除之前的定时器\n\n        this.timer = setTimeout(()=>{\n          this.isloading = true;\n          setTimeout(()=>{this.isloading=false;\n            this.searchTransaction();\n          },2000)\n        },1000)\n      },\n      term : function(val,oldval){\n        clearTimeout(this.timer); //清除之前的定时器\n\n        this.timer = setTimeout(()=>{\n          this.isloading = true;\n          setTimeout(()=>{this.isloading=false;\n            this.searchTransaction();\n          },2000)\n        },1000)\n      }\n    },\n    computed: {\n      fields () {\n        return [{\n          name: 'transactionAuditId',\n          title: 'transaction ID',\n        }, {\n          name: 'username',\n          title: 'username',\n        }, {\n          name: '__slot:operateType',\n          title: 'operateType',\n        },\n          {\n          name: 'operateMoney',\n          title: 'operate money',\n        },\n          {\n            name: 'createTime',\n            title: 'create time'\n          },\n          {\n            name: '__slot:actions',\n            dataClass: 'text-right',\n          }\n        ]\n      },\n      filteredData () {\n        if (!this.term || this.term.length < 1) {\n          return this.fieldData\n        }\n        return this.fieldData.filter(item => {\n          return item.transactionAuditId.toLowerCase().startsWith(this.term.toLowerCase()) || item.username.toLowerCase().includes(this.term.toLowerCase())\n        })\n      },\n    },\n    created() {\n      getAuditRecords(this).then(res=>{\n        console.log(res.data);\n        if (res.status == 200) {\n          this.fieldData = res.data.data;\n          this.showList = this.fieldData;\n          console.log(this.fieldData);\n        } else {\n          console.log('Return 500!')\n        }\n      })\n    }\n  }\n</script>\n\n<style scoped>\n  .hover {\n    background-color: orangered;\n    cursor: pointer;\n  }\n\n  .close_icon {\n    position: absolute;\n    top: 0;\n    left: 100%;\n    width: 15px;\n    height: 15px;\n    border-radius: 5px;\n    display: flex;\n    justify-content: center;\n  }\n</style>\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./audit_wallet.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./audit_wallet.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./audit_wallet.vue?vue&type=template&id=140e61d2&scoped=true&\"\nimport script from \"./audit_wallet.vue?vue&type=script&lang=js&\"\nexport * from \"./audit_wallet.vue?vue&type=script&lang=js&\"\nimport style0 from \"./audit_wallet.vue?vue&type=style&index=0&id=140e61d2&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"140e61d2\",\n  null\n  \n)\n\nexport default component.exports","let ip = '39.106.57.246';\nlet port = '4396';\nlet base_url = 'http://' + ip + ':' + port;\n\nexport function getAuditRecords(obj){\n  return obj.$http.get(base_url + \"/admin/audit/get\");\n}\n\nexport function approveAudit(obj,data){\n  return obj.$http.post(base_url + \"/admin/audit/pass \",data);\n}\n\nexport function refuseAudit(obj,data){\n  return obj.$http.post(base_url + \"/admin/audit/refuse \",data);\n}\n\nexport function getDictionary(obj){\n  return obj.$http.get(base_url + \"/admin/dict/get\");\n}\n\nexport function updateDictionary(obj,data){\n  return obj.$http.post(base_url + \"/admin/dict/update\",data);\n}\n\nexport function addDictionary(obj,data){\n  return obj.$http.post(base_url + \"/admin/dict/add \",data);\n}\n\nexport function removeDictionary(obj,data){\n  return obj.$http.post(base_url + \"/admin/dict/delete\",data);\n}\n\nexport function getUsers(obj){\n  return obj.$http.get(base_url + \"/admin/menu/get \");\n}\n\nexport function addPermission(obj,data){\n  return obj.$http.post(base_url + \"/admin/menu/add  \",data);\n}\n\nexport function removePermission(obj,data){\n  return obj.$http.post(base_url + \"/admin/menu/delete \",data);\n}\n","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./audit_wallet.vue?vue&type=style&index=0&id=140e61d2&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./audit_wallet.vue?vue&type=style&index=0&id=140e61d2&scoped=true&lang=css&\""],"sourceRoot":""}